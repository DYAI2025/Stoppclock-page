<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mytime.site — Pure Focus</title>
    <style>
        :root {
            --bg: #0a0a0b;
            --panel: rgba(255, 255, 255, 0.04);
            --panel2: rgba(255, 255, 255, 0.06);
            --text: #f2f3f5;
            --muted: #a7abb3;
            --indigo: #5b46ff;
            --violet: #a78bfa;
            --ringTrack: rgba(255, 255, 255, 0.08);
            --glow1: rgba(91, 70, 255, 0.3);
            --radius: 18px;
            --radiusSm: 14px;
            --shadowSoft: 0 24px 80px rgba(0, 0, 0, 0.65);
            --hairline: 1px solid rgba(255, 255, 255, 0.08);
            --font-main: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at 50% 50%, rgba(91, 70, 255, 0.08) 0%, transparent 70%);
            color: var(--text);
            font-family: var(--font-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            line-height: 1.5;
        }

        /* Typography */
        h1 {
            font-weight: 200;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: var(--muted);
            margin-bottom: 4rem;
            animation: fadeIn 1.2s ease-out;
        }

        /* Timer Hero */
        .timer-container {
            position: relative;
            width: clamp(280px, 45vw, 420px);
            height: clamp(280px, 45vw, 420px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 4rem;
        }

        .timer-svg {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            transform: rotate(-90deg);
            filter: drop-shadow(0 0 15px rgba(91, 70, 255, 0.1));
        }

        .timer-track {
            fill: none;
            stroke: var(--ringTrack);
            stroke-width: 4;
        }

        .timer-progress {
            fill: none;
            stroke: var(--indigo);
            stroke-width: 4;
            stroke-linecap: round;
            stroke-dasharray: 880;
            stroke-dashoffset: 880;
            transition: stroke-dashoffset 0.1s linear, stroke 0.5s ease;
        }

        .timer-display {
            font-size: clamp(4rem, 8vw, 6.5rem);
            font-weight: 200;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.02em;
            z-index: 10;
        }

        /* Presets */
        .presets {
            display: flex;
            gap: 12px;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .preset-btn {
            background: var(--panel);
            border: var(--hairline);
            color: var(--muted);
            padding: 10px 20px;
            border-radius: var(--radiusSm);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
            backdrop-filter: blur(10px);
        }

        .preset-btn:hover {
            color: var(--text);
            background: var(--panel2);
            border-color: rgba(255,255,255,0.2);
        }

        .preset-btn.active {
            background: var(--text);
            color: var(--bg);
            border-color: var(--text);
            box-shadow: 0 0 20px rgba(255,255,255,0.15);
        }

        /* Custom Input */
        .custom-input-group {
            display: none;
            align-items: center;
            gap: 8px;
            animation: slideUp 0.3s ease;
        }
        .custom-input-group.visible { display: flex; }
        .custom-input-group input {
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--muted);
            color: var(--text);
            width: 40px;
            text-align: center;
            font-family: inherit;
            font-size: 1rem;
            padding: 2px;
            outline: none;
        }

        /* Controls */
        .controls {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 5rem;
        }

        .btn-main {
            width: 72px; height: 72px;
            border-radius: 50%;
            border: none;
            background: var(--text);
            color: var(--bg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, background 0.2s;
            box-shadow: var(--shadowSoft);
        }

        .btn-main:hover { transform: scale(1.05); }
        .btn-main:active { transform: scale(0.95); }

        .btn-sec {
            background: none;
            border: none;
            color: var(--muted);
            cursor: pointer;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
            transition: color 0.2s;
            padding: 10px;
        }
        .btn-sec:hover { color: var(--text); }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 3rem;
            color: var(--muted);
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            opacity: 0.6;
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        @media (prefers-reduced-motion: reduce) {
            * { transition: none !important; animation: none !important; }
        }

        /* Icons */
        .icon { fill: currentColor; width: 24px; height: 24px; }
    </style>
</head>
<body>

    <h1 id="headline">Deep Focus</h1>

    <div class="timer-container">
        <svg class="timer-svg" viewBox="0 0 300 300">
            <circle class="timer-track" cx="150" cy="150" r="140" />
            <circle class="timer-progress" id="progressRing" cx="150" cy="150" r="140" />
        </svg>
        <div class="timer-display" id="timeDisplay">25:00</div>
    </div>

    <div class="presets">
        <button class="preset-btn active" data-time="1500" data-label="Deep Focus">Pomodoro</button>
        <button class="preset-btn" data-time="3000" data-label="Deep Work">Deep Work</button>
        <button class="preset-btn" data-time="600" data-label="Meditation">Meditation</button>
        <button class="preset-btn" id="customBtn">Custom</button>
        
        <div class="custom-input-group" id="customGroup">
            <input type="number" id="customMin" placeholder="25" min="1" max="999">
            <span style="color:var(--muted)">:</span>
            <input type="number" id="customSec" placeholder="00" min="0" max="59">
            <button class="preset-btn" id="customSet">Set</button>
        </div>
    </div>

    <div class="controls">
        <button class="btn-sec" id="resetBtn">RESET</button>
        <button class="btn-main" id="startBtn">
            <svg id="playIcon" class="icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            <svg id="pauseIcon" class="icon" style="display:none" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <button class="btn-sec" id="muteBtn" title="Toggle Sound">SOUND</button>
    </div>

    <div class="footer">
        Streak: <span id="streakCount">0</span> • Total: <span id="totalFocus">0</span>m
    </div>

    <script type="module">
        // --- State Management ---
        const state = {
            duration: 1500,
            remaining: 1500,
            isRunning: false,
            lastTick: 0,
            audioCtx: null,
            isMuted: false,
            streak: parseInt(localStorage.getItem('focusStreak') || '0'),
            totalMinutes: parseInt(localStorage.getItem('totalFocusMinutes') || '0'),
            lastDate: localStorage.getItem('lastFocusDate') || ''
        };

        // --- DOM Elements ---
        const timeDisplay = document.getElementById('timeDisplay');
        const progressRing = document.getElementById('progressRing');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const muteBtn = document.getElementById('muteBtn');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const streakEl = document.getElementById('streakCount');
        const totalEl = document.getElementById('totalFocus');
        const headline = document.getElementById('headline');
        const customGroup = document.getElementById('customGroup');
        const presetBtns = document.querySelectorAll('.preset-btn[data-time]');

        const RING_CIRCUMFERENCE = 2 * Math.PI * 140;
        progressRing.style.strokeDasharray = RING_CIRCUMFERENCE;

        // --- Audio Engine ---
        function initAudio() {
            if (!state.audioCtx) state.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }

        function playSound(freq, type = 'sine', duration = 0.1) {
            if (state.isMuted) return;
            initAudio();
            const osc = state.audioCtx.createOscillator();
            const gain = state.audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, state.audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, state.audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, state.audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(state.audioCtx.destination);
            osc.start();
            osc.stop(state.audioCtx.currentTime + duration);
        }

        // --- Core Logic ---
        function updateDisplay() {
            const m = Math.floor(state.remaining / 60);
            const s = Math.floor(state.remaining % 60);
            timeDisplay.textContent = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            
            const offset = RING_CIRCUMFERENCE - (state.remaining / state.duration) * RING_CIRCUMFERENCE;
            progressRing.style.strokeDashoffset = offset;
        }

        function tick(now) {
            if (!state.isRunning) return;
            
            const delta = (now - state.lastTick) / 1000;
            state.lastTick = now;
            state.remaining -= delta;

            if (state.remaining <= 0) {
                state.remaining = 0;
                completeSession();
            } else {
                updateDisplay();
                requestAnimationFrame(tick);
            }
        }

        function toggleTimer() {
            state.isRunning = !state.isRunning;
            if (state.isRunning) {
                state.lastTick = performance.now();
                requestAnimationFrame(tick);
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                playSound(880, 'sine', 0.05);
            } else {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                playSound(440, 'sine', 0.05);
            }
        }

        function resetTimer() {
            state.isRunning = false;
            state.remaining = state.duration;
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
            updateDisplay();
            playSound(220, 'triangle', 0.1);
        }

        function setPreset(seconds, label) {
            state.duration = seconds;
            state.remaining = seconds;
            headline.textContent = label;
            resetTimer();
            customGroup.classList.remove('visible');
        }

        function completeSession() {
            state.isRunning = false;
            updateDisplay();
            playSound(1200, 'sine', 0.5);
            setTimeout(() => playSound(1500, 'sine', 0.8), 200);

            // Streak & Stats Logic
            const today = new Date().toISOString().split('T')[0];
            const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];

            if (state.lastDate !== today) {
                if (state.lastDate === yesterday) {
                    state.streak++;
                } else {
                    state.streak = 1;
                }
                state.lastDate = today;
            }

            state.totalMinutes += Math.floor(state.duration / 60);
            
            localStorage.setItem('focusStreak', state.streak);
            localStorage.setItem('totalFocusMinutes', state.totalMinutes);
            localStorage.setItem('lastFocusDate', state.lastDate);
            
            renderStats();
            alert("Focus session complete. Take a breath.");
        }

        function renderStats() {
            streakEl.textContent = state.streak;
            totalEl.textContent = state.totalMinutes;
        }

        // --- Event Listeners ---
        startBtn.onclick = toggleTimer;
        resetBtn.onclick = resetTimer;
        muteBtn.onclick = () => {
            state.isMuted = !state.isMuted;
            muteBtn.style.opacity = state.isMuted ? '0.3' : '1';
        };

        presetBtns.forEach(btn => {
            btn.onclick = () => {
                presetBtns.forEach(b => b.classList.remove('active'));
                document.getElementById('customBtn').classList.remove('active');
                btn.classList.add('active');
                setPreset(parseInt(btn.dataset.time), btn.dataset.label);
            };
        });

        document.getElementById('customBtn').onclick = () => {
            customGroup.classList.add('visible');
            document.getElementById('customBtn').classList.add('active');
            presetBtns.forEach(b => b.classList.remove('active'));
        };

        document.getElementById('customSet').onclick = () => {
            const m = parseInt(document.getElementById('customMin').value) || 0;
            const s = parseInt(document.getElementById('customSec').value) || 0;
            const total = (m * 60) + s;
            if (total > 0) setPreset(total, "Custom Focus");
        };

        // Shortcuts
        window.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'INPUT') return;
            if (e.code === 'Space') { e.preventDefault(); toggleTimer(); }
            if (e.code === 'KeyR') resetTimer();
            if (['Digit1', 'Digit2', 'Digit3', 'Digit4'].includes(e.code)) {
                const idx = parseInt(e.code.slice(-1)) - 1;
                const target = [...presetBtns, document.getElementById('customBtn')][idx];
                if (target) target.click();
            }
        });

        // Init
        renderStats();
        updateDisplay();
    </script>
</body>
</html>
<!-- How to run: open index.html in a browser. -->
